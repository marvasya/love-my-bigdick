<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ğ’Ğ°Ğ»ĞµĞ½Ñ‚Ğ¸Ğ½ĞºĞ° â¤ï¸</title>

  <style>
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow:hidden;
      transition: background .25s ease;
      background: #0047AB; /* ÑÑ‚Ğ°Ñ€Ñ‚ â€” ÑĞ¸Ğ½ÑÑ */
    }

    /* floating hearts */
    .hearts{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
    }
    .heart{
      position:absolute;
      opacity:.22;
      animation: floatUp linear infinite;
      filter: blur(.15px);
    }
    @keyframes floatUp{
      from{ transform: translateY(110vh) translateX(0) rotate(0deg); }
      to{ transform: translateY(-20vh) translateX(60px) rotate(25deg); }
    }

    .app{ width:min(560px, 100%); position:relative; }
    .card{
      border-radius: 22px;
      overflow:hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
    }

    .top{
      padding:16px 18px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.18);
      font-weight:700;
      user-select:none;
    }
    .tiny{ font-size: 12.5px; opacity:.85; }

    .scene{
      display:none;
      padding: 0 18px 18px;
      animation: pop .18s ease;
    }
    .scene.active{ display:block; }
    @keyframes pop{
      from{ opacity:0; transform: translateY(6px); }
      to{ opacity:1; transform: translateY(0); }
    }

    h1{
      margin: 10px 0 6px;
      font-size: clamp(22px, 3.2vw, 34px);
      line-height:1.1;
      letter-spacing:-0.02em;
    }
    p{
      margin:0 0 14px;
      line-height:1.5;
      font-size: 14.5px;
      opacity:.92;
    }

    .media{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.12);
      min-height: 170px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:16px;
      position:relative;
      overflow:hidden;
    }
    .emoji{
      font-size: 60px;
      line-height:1;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
    }
    .emojiRow{
      margin-top: 10px;
      font-size: 26px;
      opacity:.98;
      letter-spacing: 2px;
    }

    .buttons{
      display:flex;
      gap:12px;
      justify-content:center;
      align-items:center;
      padding-top: 14px;
      position:relative;
      height: 76px;
    }

    button{
      border:0;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight:800;
      font-size: 15px;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
      user-select:none;
      color:#0f1220;
    }
    button:active{ transform: scale(.98); }

    .btn-yes{
      background: #fff;
      box-shadow: 0 14px 26px rgba(0,0,0,.22);
    }
    .btn-no{
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(0,0,0,.08);
    }

    /* runaway "Ğ½ĞµÑ‚" */
    .runaway{
      position:absolute;
      left: 70%;
      top: 50%;
      transform: translate(-50%, -50%);
      will-change: left, top, transform;
    }

    /* photo grid on YES */
    .photos{
      width:100%;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .photos img{
      width:100%;
      height: 190px;
      object-fit: cover;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 14px 30px rgba(0,0,0,.25);
      background: rgba(0,0,0,.18);
    }

    .footer{
      padding: 12px 18px 16px;
      border-top: 1px solid rgba(255,255,255,.12);
      opacity:.9;
      font-size: 12.5px;
    }
  </style>
</head>

<body>
  <div class="hearts" id="hearts"></div>

  <main class="app">
    <section class="card">
      <div class="top">
        <div class="badge"><span>ğŸ’—ğŸ’–ğŸ’—</span> Ğ’Ğ°Ğ»ĞµĞ½Ñ‚Ğ¸Ğ½ĞºĞ°</div>
        <div class="tiny" id="progress">Ğ¡Ñ†ĞµĞ½Ğ° 1/4</div>
      </div>

      <!-- 1) MAIN (ÑĞ¸Ğ½ÑÑ) -->
      <div class="scene active" data-scene="1">
        <h1>Ğ¢Ñ‹ Ğ±ÑƒĞ´ĞµÑˆÑŒ Ğ¼Ğ¾ĞµĞ¹ Ğ²Ğ°Ğ»ĞµĞ½Ñ‚Ğ¸Ğ½ĞºĞ¾Ğ¹? ğŸ’—</h1>
        <p>ĞŸĞ¾Ğ´ÑƒĞ¼Ğ°Ğ¹ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞµĞ½ÑŒĞºĞ¾â€¦ Ğ±ÑƒÑ€Ğ³ĞµÑ€ ĞºĞ¸Ğ½Ğ³ Ñ€ÑĞ´Ğ¾Ğ¼ ğŸ˜ˆ</p>

        <div class="media">
          <div>
            <div class="emoji">ğŸ¥°</div>
            <div class="emojiRow">ğŸ’— ğŸ’– ğŸ’ ğŸ’• ğŸ’—</div>
          </div>
        </div>

        <div class="buttons" id="buttons1">
          <button class="btn-yes" id="yesBtn">Ğ”Ğ° ğŸ’˜</button>
          <button class="btn-no runaway" id="noBtn">ĞĞµÑ‚ ğŸ™ˆ</button>
        </div>
      </div>

      <!-- 2) AFTER NO -->
      <div class="scene" data-scene="2">
        <h1>Ğ¢Ñ‹ Ñ‡Ñ‚Ğ¾, Ğ¥Ğ£Ğ™? ğŸ’”</h1>
        <p>Ğ¯ Ğ½Ğµ ÑˆÑƒÑ‚Ğ¸Ğ»Ğ° ğŸ’”ğŸ’”ğŸ’”</p>

        <div class="media">
          <div>
            <div class="emoji">ğŸ˜¿</div>
            <div class="emojiRow">ğŸ’” ğŸ’” ğŸ’” ğŸ˜¿ ğŸ’”</div>
          </div>
        </div>

        <div class="buttons">
          <button class="btn-yes" data-next="3">Ğ ĞĞ—Ğ’ĞĞ”</button>
          <button class="btn-no" data-next="1">Ğ•Ñ‰Ñ‘ Ğ¾Ğ´Ğ¸Ğ½ ÑˆĞ°Ğ½Ñ ğŸ’</button>
        </div>
      </div>

      <!-- 3) YELLOW-ORANGE GRADIENT -->
      <div class="scene" data-scene="3">
        <h1>Ğ¥ĞĞ¥ĞĞ¥ĞĞ¥!!! Ğ¥Ğ£Ğ£Ğ£Ğ£Ğ£Ğ£Ğ£Ğ£Ğ™ ğŸ˜‚</h1>
        <p>Ğ¢Ñ‹ Ğ´ÑƒĞ¼Ğ°Ğ», Ñ Ñ‚ĞµĞ±Ğµ Ğ´Ğ°Ğ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ½ĞµÑ‚?! ğŸ˜­ğŸ¤£</p>

        <div class="media">
          <div>
            <div class="emoji">Ğ° Ğ½Ñƒ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ¶Ğ¼Ğ¸ Ğ½Ğ° Ğ”Ğ</div>
            <div class="emojiRow">ğŸ˜‚ ğŸ¤£ ğŸ˜­ ğŸ˜‚ ğŸ¤£ ğŸ˜­</div>
          </div>
        </div>

        <div class="buttons">
          <button class="btn-yes" data-next="4">Ğ›Ğ°Ğ°Ğ°Ğ°Ğ´Ğ½Ğ°, Ğ´Ğ°Ğ²Ğ°Ğ¹ Â«Ğ”ĞÂ» ğŸ˜</button>
          <button class="btn-no" data-next="2">Ğ¯ Ñ€Ğ°Ñ„Ğ°ÑĞ»ÑŒ</button>
        </div>
      </div>

      <!-- 4) YES (Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ğ¾-Ñ€Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚ + 2 Ñ„Ğ¾Ñ‚Ğ¾) -->
      <div class="scene" data-scene="4">
        <h1>YEEEES!!! Ğ¯ Ğ¢Ğ’ĞĞ¯Ğ¯Ğ¯Ğ¯Ğ¯! ğŸ’</h1>
        <p>Ğ›ÑĞ±Ğ»Ñ Ñ‚Ğ¸Ğ±ÑÑÑ Ğ¿Ğ°Ñ‚Ğ°Ğ¼ÑƒÑ‡Ñ‚Ğ¾Ğ¾ ğŸ¥°ğŸ’—</p>

        <div class="media" style="background: rgba(0,0,0,.10);">
          <div class="photos">
            <img src="img/photo1.jpg" alt="Ğ¤Ğ¾Ñ‚Ğ¾ 1" />
            <img src="img/photo2.jpg" alt="Ğ¤Ğ¾Ñ‚Ğ¾ 2" />
          </div>
        </div>

        <div class="buttons" style="height:auto; padding:14px 0 6px;">
          <button class="btn-yes" id="restart">ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾ â†º</button>
        </div>
      </div>

    </section>
  </main>

  <script>
    // helpers
    const $ = (s, el=document) => el.querySelector(s);
    const $$ = (s, el=document) => Array.from(el.querySelectorAll(s));

    // scene backgrounds
    const BG = {
      1: "rgb(0,71,171)", // #0047AB
      2: "linear-gradient(135deg, #1b1b26, #5a1231)", // Ñ‚ĞµĞ¼Ğ½Ğ¾ + Ñ€Ğ¾Ğ·Ğ¾Ğ²Ğ¾-Ğ±Ğ¾Ñ€Ğ´Ğ¾Ğ²Ñ‹Ğ¹
      3: "linear-gradient(135deg, #FFD54A, #FF7A18)", // Ğ¶ĞµĞ»Ñ‚Ğ¾-Ğ¾Ñ€Ğ°Ğ½Ğ¶ĞµĞ²Ñ‹Ğ¹
      4: "linear-gradient(135deg, #7a2cff, #ff3aa7)"  // Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ğ¾-Ñ€Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹
    };

    // floating pink hearts
    const hearts = $("#hearts");
    const heartChars = ["ğŸ’—","ğŸ’–","ğŸ’","ğŸ’•","ğŸ’˜"];
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
      h.style.left = Math.random()*100 + "vw";
      h.style.animationDuration = (6 + Math.random()*8) + "s";
      h.style.fontSize = (14 + Math.random()*22) + "px";
      hearts.appendChild(h);
      setTimeout(()=>h.remove(), 15000);
    }
    for(let i=0;i<18;i++) setTimeout(spawnHeart, i*220);
    setInterval(spawnHeart, 420);

    // scenes
    let scene = 1;
    const total = 4;
    const progress = $("#progress");

    function applyBackground(n){
      document.body.style.background = BG[n] || BG[1];
    }

    function showScene(n){
      scene = n;
      $$(".scene").forEach(s => s.classList.remove("active"));
      const target = $(`.scene[data-scene="${n}"]`);
      if(target) target.classList.add("active");
      progress.textContent = `Ğ¡Ñ†ĞµĞ½Ğ° ${n}/${total}`;
      applyBackground(n);
      window.location.hash = `scene-${n}`;
    }

    // restore from hash
    const m = (window.location.hash || "").match(/scene-(\d+)/);
    if(m){
      const num = Math.max(1, Math.min(total, parseInt(m[1],10)));
      showScene(num);
    } else {
      applyBackground(1);
    }

    // runaway "ĞĞµÑ‚" on scene 1
    const noBtn = $("#noBtn");
    const yesBtn = $("#yesBtn");
    const buttons1 = $("#buttons1");

    function resetNoPosition(){
      noBtn.style.left = "70%";
      noBtn.style.top  = "50%";
      noBtn.style.transform = "translate(-50%, -50%)";
    }
    resetNoPosition();

    function moveNo(){
      const rect = buttons1.getBoundingClientRect();
      const pad = 16;
      const x = pad + Math.random()*(rect.width - pad*2);
      const y = pad + Math.random()*(rect.height - pad*2);
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "translate(-50%, -50%)";
    }

// --- ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞµÑ‚" ÑƒĞ±ĞµĞ³Ğ°ĞµÑ‚ Ñ€Ğ¾Ğ²Ğ½Ğ¾ 3 Ñ€Ğ°Ğ·Ğ° (ĞŸĞš + Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½)

let dodgeCount = 0;
const maxDodges = 3;

// Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ ÑƒĞ±ĞµĞ³Ğ°Ğ½Ğ¸Ñ
function dodge() {
  if (dodgeCount < maxDodges) {
    dodgeCount++;
    moveNo();
  }
}

// ĞŸĞš: ÑƒĞ±ĞµĞ³Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğ¸
noBtn.addEventListener("mouseenter", () => {
  dodge();
});

// Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½: ÑƒĞ±ĞµĞ³Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞµ Ğ½Ğ°Ğ¶Ğ°Ñ‚ÑŒ
noBtn.addEventListener("touchstart", () => {
  dodge();
}, { passive: true });

// ĞšĞ»Ğ¸Ğº: ĞµÑĞ»Ğ¸ ÑƒĞ¶Ğµ ÑƒĞ±ĞµĞ¶Ğ°Ğ»Ğ° 3 Ñ€Ğ°Ğ·Ğ° â†’ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞ°ĞµĞ¼ Ğ½Ğ°Ğ¶Ğ°Ñ‚ÑŒ
noBtn.addEventListener("click", () => {
  if (dodgeCount >= maxDodges) {
    showScene(2); // Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğ½Ğ° "Ğ¢Ñ‹ ÑĞµÑ€ÑŒĞµĞ·Ğ½Ğ¾?"
  } else {
    dodge(); // ĞµÑĞ»Ğ¸ ĞµÑ‰Ñ‘ Ğ½Ğµ ÑƒĞ±ĞµĞ¶Ğ°Ğ»Ğ° 3 Ñ€Ğ°Ğ·Ğ° â€” ÑƒĞ±ĞµĞ³Ğ°ĞµÑ‚
  }
});

    // YES -> ÑÑ€Ğ°Ğ·Ñƒ Ğ½Ğ° ÑÑ†ĞµĞ½Ñƒ 4
    yesBtn.addEventListener("click", ()=> showScene(4));

    // next buttons
    $$("[data-next]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const n = parseInt(btn.dataset.next,10);
        showScene(n);
      });
    });

    // restart
    $("#restart").addEventListener("click", ()=>{
      resetNoPosition();
      showScene(1);
    });
  </script>
  <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>

<script>
  twemoji.parse(document.body, {
    folder: 'svg',
    ext: '.svg'
  });
</script>
</body>
</html>
